{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2022-12-20 14:16:19.176016",
 "custom_format": 1,
 "disabled": 0,
 "doc_type": "Bundle Delivery Note",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<div class=\"print-heading\"><h2>Bundle Delivery Note<br><small>{{doc.name}}</small></h2></div>\n\n<table border = 0>\n    <tr>\n        <td>\n            <div style=\"\">Parent Item: {{doc.item_parent}}</div>\n        </td>\n        <td>\n            <div style=\"\">Sales Order: {{doc.sales_order}}</div>\n        </td>\n    </tr>\n    <tr>\n        <td>\n            {% if doc.project %}\n            <div style=\"\">Project: {{doc.project}}</div>\n            {% endif %}\n        </td>\n        <td></td>\n    </tr>\n</table>\n\n{% set bdns = frappe.db.get_all('Bundle Delivery Note', {'item_parent': doc.item_parent, 'docstatus': 1, 'sales_order': doc.sales_order}, 'name' ) %}\n\n<!--Delivered Items-->\n<div style=\"text-align:center;\">\n    <h3>Delivered Items</h3>\n</div>\n\n{% if bdns %}\n<table border = 1>\n    <tr>\n        <th>\n            Item Code\n        </th>\n        <th>\n            Item Name\n        </th>\n        <th>\n            Quantity\n        </th>\n        <th>\n            Warehouse\n        </th>\n        <th>\n            Batch No\n        </th>\n        <th>\n            Serial No\n        </th>\n    </tr>\n    {% for bdn in bdns%}\n        {% set packed_items = frappe.db.get_all('Bundle Delivery Note Item', {'parent': bdn.name }, [\n        'item_code', 'item_name', 'qty', 'warehouse'\n        ]) %}\n        \n        {% for item in packed_items %}\n    <tr>\n        <td>{{item[\"item_code\"]}}</td>\n        <td>{{item.item_name}}</td>\n        <td>{{item.qty}}</td>\n        <td>{{item.warehouse}}</td>\n        <td>{{item.batch_no}}</td>\n        <td>{{item.serial_no}}</td>\n    </tr>\n        {% endfor %}\n    {% endfor %}\n    \n</table>\n{% else %}\n<div style=\"text-align:center;\">\n    No item has delivered yet\n</div>\n{% endif %}\n\n\n<!--Undelivered Items-->\n<div style=\"text-align:center;\"><h3>Undelivered Items</h3></div>\n\n{% set so_packed_items = frappe.db.get_all('Packed Item', {'parent': doc.sales_order, 'parent_item': doc.item_parent}, ['item_code', 'item_name', 'qty'])%}\n\n{% set delivery_note = doc.delivery_note %}\n{% if not delivery_note %}\n    {% set delivery_note = frappe.db.get_value('Bundle Delivery Note', {'sales_order': doc.sales_order, 'docstatus': 1}, 'delivery_note') %}\n{% endif %}\n\n{% if not delivery_note%}\n    <table border = 1>\n        <tr>\n            <th>\n                Item Code\n            </th>\n            <th>\n                Item Name\n            </th>\n            <th>\n                Quantity\n            </th>\n        </tr>\n        {% for item in so_packed_items %}\n        <tr>\n            <td>{{item[\"item_code\"]}}</td>\n            <td>{{item.item_name}}</td>\n            <td>{{item.qty}}</td>\n        </tr>\n        {% endfor %}\n    \n    </table>\n\n{% else %}\n    <table border = 1>\n        <tr>\n            <th>\n                Item Code\n            </th>\n            <th>\n                Item Name\n            </th>\n            <th>\n                Quantity\n            </th>\n        </tr>\n        {% for so_packed_item in so_packed_items %}\n            {% set dn_qty = frappe.db.get_value('Packed Item', {\n                'parent': delivery_note, \n                'item_code': so_packed_item.item_code,\n                'parent_item': doc.item_parent\n            }, 'qty' ) %}\n            {% if dn_qty < so_packed_item.qty %}\n            <tr>\n                <td>{{so_packed_item[\"item_code\"]}}</td>\n                <td>{{so_packed_item.item_name}}</td>\n                <td>{{so_packed_item.qty - dn_qty}}</td>\n            </tr>\n            {% endif %}\n        {% endfor %}\n        \n    </table>\n{% endif %}\n        \n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2022-12-20 16:43:16.452275",
 "modified_by": "Administrator",
 "module": "Sabaintegration",
 "name": "Delivered and Undelivered Packed Items",
 "owner": "Administrator",
 "print_format_builder": 1,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}